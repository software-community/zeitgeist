{% extends "main_page/base.html" %}

{% load static %}

{% block content %}
<!-- <div id="home">
    background image
    <div class="section-bg" style="background-image:url({% static 'main_page/img/maxresdefault.jpg' %})"
        data-stellar-background-ratio="0.5"></div>
    /background image

    home wrapper
    <div class="home-wrapper">
    </div>
    /home wrapper
</div> -->
<div class='jumbotron' style="background-color:#39a0ed; color:#fdef8d ">
    <br><br>
    <div class='container'>
        <ul class='list-group'>
            <li style="background-color:#39a0ed; color:#29339b; font-size: larger " class='list-group-item'>Users must register themselves as participants, after which they can take part in any event after paying for that event's subcategory. To register as a participant, <a href="{% url 'register_as_participant' %}" style="font-weight:bold;color:#17301c">click here</a>. After successful registration, you will receive your unique PARTICIPANT CODE which you should use to take part in any event. <b>Note that you can take part in events only after registering yourself as a participant.</b></li>
            <li style="background-color:#39a0ed; color:#29339b; font-size: larger " class='list-group-item'><b>Pay for a subcategory and get to participate in any event in that subcategory at no extra cost !!!</b></li>
            <li style="background-color:#39a0ed; color:#29339b; font-size: larger " class='list-group-item'>For duet/group events, <strong>only the captain should register the team</strong>. All team members (including the captain) must have already paid for the Subcategory of the event that they are taking part in, otherwise the team won't get registered.</li>
            <li style="background-color:#39a0ed; color:#29339b; font-size: larger " class='list-group-item'><strong>You will receive one email for each event you take part in.</strong> If you do not receive an email for the event, you should register for that event again.</li>
            <li style="background-color:#39a0ed; color:#29339b; font-size: larger " class='list-group-item'>For queries related to events, Contact event management heads:<br>
            <strong>Jashan : <a href="tel:9988069842">99880 69842</a><br>Naveen : <a href="tel:7610911344">76109 11344</a></strong></li>
        </ul>
    </div>

</div>

<div id="Events" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        {% for category,subcategories in events_data.items %}

        <!-- section title -->
        <div class="section-title">
            <h3 class="title"><span style="color: #dd0a37;">{{ category.name }}</span></h3>
            
        </div>
        <!-- section title -->

        {% for subcategory,events in subcategories.items %}

        <!-- member -->
        <div class="jumbotron">

            <h2 class="title">{{ subcategory.name }}</h2>
            <div class="row">
                {% for event in events %}

                <div class="col-md-4 col-xs-6">
                    <div class="member" data-toggle="modal" data-target="#{{ event.name|cut:' '|cut:'('|cut:')'|cut:'&'|cut:'.'|cut:'/' }}">
                        <div class="member-img">
                            <img src="{% static 'main_page/img/events_background.png' %}" alt="">
                        </div>
                        <div class="member-body">
                            <div class="member-content">
                                <h2>{{ event.name }}</h2>
                                <span>{{ category.name }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                {% endfor %}

            </div>

            {% if subcategory.participation_fees_per_person == 0 %}
            <h4 class='title'><span style="color: crimson">This subcategory is for online events, and registrations for these events are handled separatedly. Contact event heads for more details.</span></h4>
            {% else %}
            <h4 class='title'><span style="color: crimson">Participation Fees:</span> {{ subcategory.participation_fees_per_person }} INR per person</h4>
            <a href="{% url 'pay_for_subcategory' subcategory.id %}" class='btn btn-danger btn-lg'>Pay Now!</a>
            {% endif %}

        </div>
        <!-- /member -->

        {% for event in events %}
        <!-- member modal -->
        <div id="{{ event.name|cut:' '|cut:'('|cut:')'|cut:'&'|cut:'.'|cut:'/' }}" class="member-modal modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <button type="button" class="member-modal-close" data-dismiss="modal"></button>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-5">
                                <div class="member-modal-img">
                                    <img src="{% static 'main_page/img/zeitgeist_logo.png' %}" alt="">
                                    <!-- <img src="{% static 'main_page/img' %}{{ event.id }}" alt=""> -->
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div class="member-modal-content">
                                    <h2 class="member-name">{{ event.name }}</h2>
                                    <span class="member-job">- {{ category.name }}</span>

                                    <p>{{ event.description }}</p>

                                    <div class="member-website">
                                        <h3>Rulebook</h3>
                                        <a class="btn btn-warning" href="{{ event.link_to_rulebook }}"
                                            target="_blank">View Rulebook</a>
                                    </div>
                                    <br>
                                    <h3 class="member-name">Type </h3>
                                    <span class="member-job">- {{ event.event_type }}</span>
                                    {% if event.event_type == "Group" %}
                                    <p><span style="color:crimson;font-weight: bold;">Minimum Team Size : </span>
                                        {{ event.minimum_team_size }}</p>
                                    <p><span style="color:crimson;font-weight: bold;">Maximum Team Size : </span>
                                        {{ event.maximum_team_size }}</p>
                                    {% endif %}
                                    <br>

                                    <h3 class="member-name">Prize Details </h3>
                                    <span class="member-job">- Cash + Goodies</span>
                                    <p><span style="color:crimson;font-weight: bold;">First : </span>
                                        {{ event.first_cash_prize }} Cash + {{ event.first_goodies }} Goodies</p>
                                    <p><span style="color:crimson;font-weight: bold;">Second : </span>
                                        {{ event.second_cash_prize }} Cash + {{ event.second_goodies }} Goodies</p>
                                    <p><span style="color:crimson;font-weight: bold;">Third : </span>
                                        {{ event.third_cash_prize }} Cash + {{ event.third_goodies }} Goodies </p>
                                    <br>

                                    <div class="member-events">
                                        <h3>Event Schedule</h3>
                                        <div class="member-event">
                                            <span style="color:crimson;font-size: medium"><strong>Start Time
                                                    -</strong>
                                            </span>
                                        </div>
                                        <p>{{ event.start_date_time|date:"D d M Y  " }}{{ event.start_date_time|time:"h:i A" }}
                                        </p>
                                        <div class="member-event">
                                            <span style="color:crimson;font-size: medium"><strong>End Time
                                                    -</strong>
                                            </span>
                                        </div>
                                        <p>{{ event.end_date_time|date:"D d M Y  " }}{{ event.end_date_time|time:"h:i A" }}
                                        </p>

                                        <br>
                                        {% if event.subcategory.participation_fees_per_person == 0 %}
                                        <h3 class="member-name">Regitrations for this event are handled on the <a href="https://www.facebook.com/zeitgeist.iitrpr/">Facebook page of Zeitgeist</a>. Please contact event heads for more details.</h3>
                                        {% else %}
                                        <a href="{% url 'register_for_event' event.id %}" class="btn btn-danger">Register</a>
                                        {% endif %}
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

        {% endfor %}
        <!-- /member modal -->

        <!-- /row -->
        {% endfor %}
    </div>
    <!-- /container -->
</div>
{% endblock content %}
