{% extends "main_page/base.html" %}

{% load static %}

{% block content %}
<!-- <div id="home">
    background image
    <div class="section-bg" style="background-image:url({% static 'main_page/img/maxresdefault.jpg' %})"
        data-stellar-background-ratio="0.5"></div>
    /background image

    home wrapper
    <div class="home-wrapper">
    </div>
    /home wrapper
</div> -->
<div class='jumbotron' style="background-color:#db324d; color:#fdef8d ">
    <br><br>
    <div class='container'>
        <ul class='list-group'>
            <li style="background-color:#db324d; color:#fdef8d; font-size: larger " class='list-group-item'>Participants must register before taking part in any event. Participants are required to give their <strong>valid mobile number (mandatory)</strong> and <strong>CA referral code (optional)</strong> for registration. To register as a participant,<br> <a  class='btn btn-warning btn-lg' href="{% url 'register_as_participant' %}" style="font-weight:bolder;">Click here</a></li>
            <li style="background-color:#db324d; color:#fdef8d; font-size: larger " class='list-group-item'>Each Category is divided into Subcategories. The participant pays for the Subcategory, and becomes eligible to participate in any event in that Subcategory.<strong> Payment is based on Subcategory, not individual events.</strong></li>
            <li style="background-color:#db324d; color:#fdef8d; font-size: larger " class='list-group-item'>For duet/group events, <strong>only the captain should register the team </strong>. All team members (including the captain) must have already paid for the Subcategory of the event that they are taking part in, otherwise the team won't get registered.</li>
        </ul>
    </div>

</div>

<div id="Events" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        {% for category,subcategories in events_data.items %}

        <!-- section title -->
        <div class="section-title">
            <h3 class="title"><span style="color: #dd0a37;">{{ category.name }}</span></h3>
        </div>
        <!-- section title -->

        {% for subcategory,events in subcategories.items %}

        <!-- member -->
        <div class="jumbotron">

            <h2 class="title">{{ subcategory.name }}</h2>

            <div class="row">
                {% for event in events %}

                <div class="col-md-4 col-xs-6">
                    <div class="member" data-toggle="modal" data-target="#{{ event.name|cut:' '|cut:'('|cut:')' }}">
                        <div class="member-img">
                            <img src="{% static 'main_page/img/member03.jpg' %}" alt="">
                        </div>
                        <div class="member-body">
                            <div class="member-content">
                                <h2>{{ event.name }}</h2>
                                <span>{{ subcategory.name }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                {% endfor %}

            </div>
            <a href="{% url 'pay_for_subcategory' subcategory.id %}" class='btn btn-danger btn-lg'>Pay Now!</a>
        </div>
        <!-- /member -->

        {% for event in events %}
        <!-- member modal -->
        <div id="{{ event.name|cut:' '|cut:'('|cut:')' }}" class="member-modal modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <button type="button" class="member-modal-close" data-dismiss="modal"></button>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-5">
                                <div class="member-modal-img">
                                    <img src="{% static 'main_page/img' %}{{ event.id }}" alt="">
                                </div>
                            </div>
                            <div class="col-md-7">
                                <div class="member-modal-content">
                                    <h2 class="member-name">{{ event.name }}</h2>
                                    <span class="member-job">- {{ category.name }}</span>

                                    <p>{{ event.description }}</p>

                                    <div class="member-website">
                                        <h3>Rulebook</h3>
                                        <a class="btn btn-warning" href="{{ event.link_to_rulebook }}"
                                            target="_blank">Download</a>
                                    </div>
                                    <br>
                                    <h3 class="member-name">Type </h3>
                                    <span class="member-job">- {{ event.event_type }}</span>
                                    {% if event.event_type == "Group" %}
                                    <p><span style="color:crimson;font-weight: bold;">Minimum Team Size : </span>
                                        {{ event.minimum_team_size }}</p>
                                    <p><span style="color:crimson;font-weight: bold;">Maximum Team Size : </span>
                                        {{ event.maximum_team_size }}</p>
                                    {% endif %}
                                    <br>

                                    <h3 class="member-name">Prize Details </h3>
                                    <span class="member-job">- Prize Money + Goodies</span>
                                    <p><span style="color:crimson;font-weight: bold;">First : </span>
                                        {{ event.first_cash_prize }}</p>
                                    <p><span style="color:crimson;font-weight: bold;">Second : </span>
                                        {{ event.second_cash_prize }}</p>
                                    <p><span style="color:crimson;font-weight: bold;">Third : </span>
                                        {{ event.third_cash_prize }}</p>
                                    <br>

                                    <div class="member-events">
                                        <h3>Event Schedule</h3>
                                        <div class="member-event">
                                            <span style="color:crimson;font-size: medium"><strong>Start Time
                                                    -</strong>
                                            </span>
                                        </div>
                                        <p>{{ event.start_date_time|date:"D d M Y  " }}{{ event.start_date_time|time:"h:i A" }}
                                        </p>
                                        <div class="member-event">
                                            <span style="color:crimson;font-size: medium"><strong>End Time
                                                    -</strong>
                                            </span>
                                        </div>
                                        <p>{{ event.end_date_time|date:"D d M Y  " }}{{ event.end_date_time|time:"h:i A" }}
                                        </p>

                                        <br>
                                        <a href="{% url 'register_for_event' event.id %}"
                                            class="btn btn-danger">Register</a>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}

        {% endfor %}
        <!-- /member modal -->

        <!-- /row -->
        {% endfor %}
    </div>
    <!-- /container -->
</div>
{% endblock content %}